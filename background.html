<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible"content="IE=edge;text/html">
	<title>Background smooth changing</title>
	<meta name="renderer"content="webkit">
	<meta name="viewport"content="width=device-width, initial-scale=1.0">
	<style>
		* {
			margin: 0;
			padding: 0;
		}
		html, body {
			width: 100%;
			height: 100%;
			font-family:Arial,"Microsoft Yahei";
		}
		#table {
			width: 100%;
			height: 300px;
			background: #76f0d1;
			color: #212121;
			text-shadow: 0 0 3px #000;
		}
		section {
			display: block;
			width: 100%;
			height: 600px;
			background: #f1f3f5;
			padding-top: 20px;
			position: relative;
		}
		section:after{
			content: '';
			width: 100%;
			height: 100%;
			position: absolute;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
			opacity: 0;
			z-index: 1;
			transition: 2s;
			-webkit-transition: 2s;
		}
		section.cur:after{
			opacity:1;
		}
		#section1:after {
			background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2016/01/chiffon6.jpg) center center no-repeat;
		}
		#section2:after {
			background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/12/wallhaven-280757.jpg) center center no-repeat;
		}
		#section3:after {
			background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/12/tgbox.jpg) center center no-repeat;
		}
		#section4:after {
			background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/11/22.jpg) center center no-repeat;
		}
		#section5:after {
			background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/12/wallhaven-280757.jpg) center center no-repeat;
		}
		.container{
			width:1200px;
			margin:0 auto;
		}
		.block {
			width: 780px;
			height: 580px;
			background: #fff;
			position: relative;
			z-index: 3;
			float:left;
			transition: 0.5s;
			-webkit-transition: 0.5s;
		}
		.block:hover {
			box-shadow: 0 5px 10px rgba(0, 0, 0, 0.35), 0 4px 15px rgba(0, 0, 0, 0.33);
		}
		.block h1 {
			text-align: center;
			display: block;
			height: 580px;
			line-height: 580px;
		}
		.right-column{
			height:100%;
			width:353px;
			background:#fff;
			top:320px;
			position:fixed;
			z-index:3;
		}
		.accordion{
			width:100%;
			height:10%;
			background:#fff;
			box-shadow: 0 5px 10px rgba(0, 0, 0, 0.35), 0 4px 15px rgba(0, 0, 0, 0.33);
			box-sizing: border-box;
			border-bottom: 1px solid #111;
			text-align:center;
			cursor:pointer;
			transition: 0.5s;
			-webkit-transition: 0.5s;
			
		}
		.accordion table{
			width:100%;
			height:100%;
		}
		.accordion.cur{
			height:70%;
			background:#eee;
			box-shadow: 0 5px 10px rgba(237, 84, 32, 0.35), 0 4px 15px rgba(237, 84, 32, 0.33);
			width:373px;
			margin-left:-10px;
		}
		.banner { position: relative; overflow: auto; width:100%; height:300px;}
		.banner li { list-style: none; width:100%; height:300px;float: left;}
		.banner .dots {
		  position: absolute;
		  left: 0;
		  right: 0;
		  bottom: 0px;
		}
		.banner .dots li {
		  width: 100px;
		  height: 10px;
		  background: rgb(234, 137, 115);
		  float: left;
		  text-indent: -999em;
		  display: inline-block;
		  cursor: pointer;
		}
		.banner .dots li:not(:last-child) {
		  border-right: 1px solid #e0e5e8;
		}
		.banner .dots li.active {
		  background: #e25837;
		}
		#spinner{
			position:absolute;
			top:0;
			left:0;
			width:100px;
			height:100px;
			transition: 0.5s;
			-webkit-transition: 0.5s;
		}
		#spinner img{
			width:100%;
			height:100%;
		}
		#spinner.action1{
			transform:rotate(90deg);
			-webkit-transform:rotate(90deg);
		}
		#spinner.action2{
			transform:rotate(180deg);
			-webkit-transform:rotate(180deg);
		}
		#spinner.action3{
			transform:rotate(270deg);
			-webkit-transform:rotate(270deg);
		}
		#spinner.action4{
			transform:rotate(360deg);
			-webkit-transform:rotate(360deg);
		}
		</style>
		<link rel="stylesheet" href="css/unslider.css">
		<link rel="stylesheet" href="css/unslider-dots.css">
		<style>
			.unslider-nav ol li.unslider-active {
			    background: #212121;
			    cursor: default;
			}
			.unslider-nav ol li {
				border:2px solid #212121;
			}
		</style>
</head>
<body>
	<header>
		<div class="banner">
		    <ul>
		        <li style="background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2016/01/chiffon6.jpg)"></li>
		        <li style="background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/12/wallhaven-280757.jpg)"></li>
		        <li style="background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/12/tgbox.jpg)"></li>
		        <li style="background: url(http://www.myriptide.com/wordpress/wp-content/uploads/2015/11/22.jpg)"></li>
		    </ul>
		</div>
	</header>
	<div id="spinner">
		<img src="img/1.png">
	</div>
	<div class="right-column">
		<div class="accordion">
			<table>
				<tbody>
					<tr>
						<td style="vertical-align:middle;text-align:center">
							<h3>泛娱生态圈</h3>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="accordion cur">
			<table>
				<tbody>
					<tr>
						<td style="vertical-align:middle;text-align:center">
							<h3>泛娱IP推荐</h3>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="accordion">
			<table>
				<tbody>
					<tr>
						<td style="vertical-align:middle;text-align:center">
							<h3>新闻TOP10</h3>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="accordion">
			<table>
				<tbody>
					<tr>
						<td style="vertical-align:middle;text-align:center">
							<h3>推荐图片</h3>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<section id="section1">
		<div class="container">
			<div class="block">
				<h1>block1</h1>
			</div>
		</div>
	</section>
	<section id="section2">
		<div class="container">
			<div class="block">
				<h1>block2</h1>
			</div>
		</div>
	</section>
	<section id="section3">
		<div class="container">
			<div class="block">
				<h1>block3</h1>
			</div>
		</div>
	</section>
	<section id="section4">
		<div class="container">
			<div class="block">
				<h1>block4</h1>
			</div>
		</div>
	</section>
	<section id="section5">
		<div class="container">
			<div class="block">
				<h1>block5</h1>
			</div>
		</div>
	</section>
	<script src="http://www.funyuchina.com/statics/js/funyu/jquery-1.7.1.min.js"></script>
	<script src="http://www.funyuchina.com/v2/lab/js/unslider-min.js"></script>
	<script>
		$(function() {
			var positionArr = new Array;
			var section = $('section');
			var gap = $(window).height()/4;
			var leftPos = $('.block').offset().left + 837;
			$('.right-column').css('left',leftPos);
			for (var i = 0;
			i < section.length;
			i++) {
				positionArr.push(section.eq(i).offset().top - gap);
			}
			var Timer = null;
			$(window).on('scroll', function() {
				if (Timer) {
					clearTimeout(Timer)
				}
				Timer = setTimeout(function() {
					section.removeClass('cur');
					for (var i = 0;i < section.length;i++) {
						if ($(window).scrollTop() >= positionArr[i - 1] && $(window).scrollTop() < positionArr[i]) {
							section.eq(i - 1).addClass('cur');
						}
						if ($(window).scrollTop() > positionArr[section.length - 1]) {
							section.eq(title.length - 1).addClass('cur');
						}
					}
					if ($('body').scrollTop() >= 320) {
						$('.right-column').css('top',0);
					}else{
						$('.right-column').css('top',320-$('body').scrollTop());
					}
				}, 30)
			})
			$('.accordion').click(function(){
				$('.accordion').removeClass('cur');
				$(this).addClass('cur');
			})
			var slider = $('.banner').unslider({
				autoplay: true,
				speed: 500,
				delay: 3000
			});
			slider.on('unslider.change', function(event, index, slide) {
				$('#spinner').removeClass().addClass('action'+index);
			});
		})
	</script>
</body>
</html>